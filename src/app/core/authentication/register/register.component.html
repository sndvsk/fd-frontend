<div class="authentication-card-container margin-top-main" fxLayout="column" fxLayoutAlign="center">
    <ng-container *ngIf="!showRegistrationForm; else registrationForm">
      <app-role-selection (roleSelected)="selectRole($event)"></app-role-selection>
    </ng-container>
  
    <ng-template #registrationForm>
      <mat-card class="authentication-card">
        <mat-card-header>
          <mat-card-title>Register</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <form [formGroup]="registerForm" fxLayout="column" fxLayoutAlign="center stretch">
            <div fxLayout="column" fxLayoutGap="20px">
              <mat-form-field class="full-width-input">
                <mat-label>First Name</mat-label>
                <input matInput formControlName="firstname" required/>
                <mat-error *ngIf="registerForm.get('firstname')?.invalid && (registerForm.get('firstname')?.dirty || registerForm.get('firstname')?.touched)">
                  First name is required.
                </mat-error>
              </mat-form-field>
              <mat-form-field class="full-width-input">
                <mat-label>Last Name</mat-label>
                <input matInput formControlName="lastname" required/>
                <mat-error *ngIf="registerForm.get('lastname')?.invalid && (registerForm.get('lastname')?.dirty || registerForm.get('lastname')?.touched)">
                  Last name is required.
                </mat-error>
              </mat-form-field>
              <mat-form-field class="full-width-input">
                <mat-label>Username</mat-label>
                <input matInput formControlName="username" required/>
                <mat-error *ngIf="registerForm.get('username')?.invalid && (registerForm.get('username')?.dirty || registerForm.get('username')?.touched)">
                  Username is required and should be at least 3 characters long.
                </mat-error>
              </mat-form-field>
              <mat-form-field class="full-width-input">
                <mat-label>Email</mat-label>
                <input matInput type="email" formControlName="email" required/>
                <mat-error *ngIf="registerForm.get('email')?.invalid && (registerForm.get('email')?.dirty || registerForm.get('email')?.touched)">
                  Please enter a valid email.
                </mat-error>
              </mat-form-field>
              <mat-form-field class="full-width-input">
                <mat-label>Telephone</mat-label>
                <input matInput type="tel" formControlName="telephone" required/>
                <mat-error *ngIf="registerForm.get('telephone')?.invalid && (registerForm.get('telephone')?.dirty || registerForm.get('telephone')?.touched)">
                  Please enter a valid telephone number.
                </mat-error>
              </mat-form-field>
              <mat-form-field class="full-width-input">
                <mat-label>Password</mat-label>
                <input matInput type="password" formControlName="password" required/>
                <mat-error *ngIf="registerForm.get('password')?.invalid && (registerForm.get('password')?.dirty || registerForm.get('password')?.touched)">
                  Password is required and should be at least 3 characters long.
                </mat-error>
              </mat-form-field>
            </div>
            <input type="hidden" formControlName="role" />
          </form>
          <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
        </mat-card-content>
        <mat-card-actions class="buttons">
            <button mat-raised-button class="btn btn--primary btn--large" 
            [disabled]="!registerForm.valid" 
            (click)="onSubmit()">Register</button>    
          <button mat-button class="btn btn--primary btn--large" routerLink="/auth/login" routerLinkActive="active">
            Login here
          </button>
        </mat-card-actions>
      </mat-card>
    </ng-template>
</div>
  