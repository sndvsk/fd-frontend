<div class="container" *ngIf="item && editMode">
    <mat-card class="item-form-card">
        <mat-card-content>
            <form fxLayout="column" fxLayoutAlign="start stretch">
                <h3>Item Info</h3>

                <mat-form-field>
                    <mat-label>Name</mat-label>
                    <input matInput type="text" [(ngModel)]="item.name" name="name" id="name" placeholder="Item name">
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Description</mat-label>
                    <textarea matInput [(ngModel)]="item.description" name="description" id="description" placeholder="Item description"></textarea>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Price</mat-label>
                    <input matInput type="number" [(ngModel)]="item.price" name="price" id="price" placeholder="Item price">
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Image URL</mat-label>
                    <input matInput type="text" [(ngModel)]="item.image" name="image" id="image" placeholder="Item image URL">
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Ingredients</mat-label>
                    <textarea matInput [(ngModel)]="item.ingredients" name="ingredients" id="ingredients" placeholder="List ingredients separated by commas"></textarea>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Allergens</mat-label>
                    <textarea matInput [(ngModel)]="item.allergens" name="allergens" id="allergens" placeholder="List allergens separated by commas"></textarea>
                </mat-form-field>

            </form>
        </mat-card-content>
        <mat-card-actions>
            <button mat-raised-button color="primary" (click)="saveItem()">Save</button>
            <button mat-button (click)="cancelEdit()">Cancel</button>
        </mat-card-actions>
    </mat-card>
</div>

<div class="item-section" *ngIf="!editMode">
    <h2>Items</h2>

    <button (click)="addItem()">Add Item</button>

    <div *ngIf="items.length > 0">
        <div *ngFor="let item of items">
            <h3>{{ item.name }}</h3>
            <p>{{ item.description }}</p>
            <p>Price: {{ item.price }}</p>
            <!-- <img [src]="item.image" alt="{{item.name}} image" width="100" height="100"> -->
            <p>Ingredients: {{ item.ingredients }}</p>
            <p>Allergens: {{ item.allergens }}</p>
            <button (click)="editItem(item)">Edit Item</button>
            <button (click)="deleteItem(item.item_id)">Delete Item</button>
            <button *ngIf="!item.menu_id" (click)="assignToMenu(item)">Assign to Menu</button>
            <button *ngIf="item.menu_id" (click)="removeFromMenu(item)">Remove from Menu</button>
            <button *ngIf="!item.restaurant_id" (click)="assignToRestaurant(item)">Assign to Restaurant</button>
            <button *ngIf="item.restaurant_id" (click)="removeFromRestaurant(item)">Remove from Restaurant</button>

        </div>
    </div>
    <div *ngIf="items.length === 0">
        <p>No items found.</p>
    </div>
</div>
